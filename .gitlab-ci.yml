image: 
  - name: "hashicorp/terraform:0.12.24"
  - entrypoint: ["/bin/bash"]

stages:
  - preFlight
  - step1
  - step2
  - step3

build:
  stage: preFlight
  script:
    - pwd
    - cd terraform/aleksey
    - ls -al
    - terraform -version

test:
  stage: step1
  script:
    - pwd
    - cd terraform/aleksey
    - ls -al
    - terraform validate

plan:
  stage: step2
  script:
    - cd terraform/aleksey
    - terraform plan

apply:
  stage: step3
  script:
    - cd terraform/aleksey
    - terraform apply
